<h2>Business Account</h2>

<div class="account-nav">
    <ul>
        <li>
            <button type="button" class="account-button" id="profile">Profile</button>
        </li>
        <li>
            <button type="button" class="account-button" id="menu">Menu</button>
        </li>
        <li>
            <button type="button" class="account-button" id="users">Users</button>
        </li>
        <li>
            <button type="button" class="account-button" id="transactions">Transactions</button>
        </li>
        <li>
            <button type="button" class="account-button" id="advanced">Advanced</button>
        </li>
    </ul>
</div>

<div class="business-profile">
    <form class="profile-form" action="/business/account?_method=PUT" method="POST">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" name="name" value="<%- currentUser.name %>" placeholder="name">
        </div>
        <div class="form-group">
            <label for="address">Address:</label>
            <input type="text" name="address" value="<%- currentUser.address %>" placeholder="address">
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="text" name="email" value="<%- currentUser.email %>" placeholder="email">
        </div>
        <div class="form-group">
            <label for="phone">Phone:</label>
            <input type="text" name="phone" value="<%- currentUser.phone %>" placeholder="phone">
        </div>
        <div class="form-group">
            <label for="website">Website:</label>
            <input type="text" name="website" value="<%- currentUser.website %>" placeholder="website">
        </div>
        <div class="form-group">
            <label for="website">Description:</label>
            <input type="text" name="description" value="<%- currentUser.description %>" placeholder="description">
        </div>
        <button type="submit">Save Changes</button>
    </form>
</div>

<div class="menu">
    <div class="form-group">
        <label>Menu Items:</label>
        <% currentUser.menu.forEach(function(item) { %>
            <div class="menuItem">
                <h4><%- item %></h4>
                <form class="menuItem-form" action="/business/menu?_method=DELETE" method="POST">
                    <button type="submit" value="<%- item %>">Remove Menu Item</button>
                </form>
                <form class="menuItem-form" action="/business/updateMenuItem" method="GET">
                    <button type="submit" value="<%- item %>">Update Menu Item</button>
                </form>
            </div>
        <% }) %>
        <div class="addMenuItem">
            <form class="menuItem-form" action="/business/menu" method="POST">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" name="name" placeholder="chicken a la lÃ¡me">
                </div>
                <div class="form-group">
                    <label for="name">Description:</label>
                    <input type="text" name="description" placeholder="sous vide chicken on pureed potato with confit rutabaga and crispy sesame tuile">
                </div>
                <div class="form-group">
                    <label for="price">Price:</label>
                    <input type="text" name="price" placeholder="18.90">
                </div>
                <button type="submit">Add Menu Item</button>
            </form>
        </div>
    </div>
</div>

<div class="users">
    <div class="form-group">
        <label>Users:</label>
        <% currentUser.users.forEach(function(user) { %>
            <div class="user">
                <label><%- user.name %></label>
                <form class="user-form" action="/account/users?_method=DELETE" method="POST">
                    <button type="submit" value="<%- user %>">Remove User</button>
                </form>
                <form class="user-form" action="/profile/updateUsers" method="GET">
                    <button type="submit" value="<%- user %>">Update User</button>
                </form>
            </div>
        <% }) %>
        <div class="addUser">
            <form class="user-form" action="/account/users" method="POST">
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="text" name="email" placeholder="employee@company.com">
                    <button type="submit">Add User</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="transactions">
    <div class="form-group">
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Business</th>
                    <th>Spent</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>17/4/17</td>
                    <td>Chinese Restaurant</td>
                    <td>$19.95</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="advanced">
    <form class="deregisterBusiness" action="/business/deregister?_method=DELETE" method="POST">
        <button type="submit">Deregister your business</button>
    </form>
</div>

<script>
    var accountButtons = [$('#profile'), $('#menu'), $('#users'), $('#transactions'), $('#advanced')]
    var accountDivs = [$('.business-profile'), $('.menu'), $('.users'), $('.transactions'), $('.advanced')]
    accountButtons.forEach((button, index) => {
        button.on('click', () => {
            accountDivs.forEach((div) => {
                div.hide()
            })
            accountDivs[index].show()
        })
    })
    accountDivs.forEach((div) => {
        div.hide()
    })
    $('.business-profile').show()
</script>
