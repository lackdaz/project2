<nav>
    <h3>Account</h3>
</nav>

<aside class="account-nav left-aside">
    <ul class="aside-nav">
        <li>
            <button type="button" class="account-button" id="profile">Profile</button>
        </li>
        <li>
            <button type="button" class="account-button" id="password">Password</button>
        </li>
        <li>
            <button type="button" class="account-button" id="creditCards">credit Cards</button>
        </li>
        <li>
            <button type="button" class="account-button" id="history">History</button>
        </li>
        <li>
            <button type="button" class="account-button" id="advanced">Advanced</button>
        </li>
    </ul>
</aside>

<main class="account-options">
    <section class="profile">
        <form class="profile-form" action="/account?_method=PUT" method="POST">
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" name="name" value="<%- currentUser.name %>" placeholder="name">
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="text" name="email" value="<%- currentUser.email %>" placeholder="email">
            </div>
            <div class="form-group">
                <label for="phone">Phone:</label>
                <input type="text" name="phone" value="<%- currentUser.phone %>" placeholder="phone">
            </div>
            <div class="form-group">
                <label for="restrictions">Restrictions/Allergies:</label>
                <input type="text" name="restrictions" value="<%- currentUser.restrictions %>" placeholder="dietary restrictions and/or allergies">
            </div>
            <button type="submit">Save Changes</button>
        </form>
    </section>

    <section class="password">
        <form class="password-form" action="/account/password?_method=PUT" method="POST">
            <div class="form-group">
                <label for="oldPassword">Old Password:</label>
                <input type="password" name="oldPassword" placeholder="Enter your old password">
            </div>
            <div class="form-group">
                <label for="newPassword">New Password:</label>
                <input type="password" name="newPassword" placeholder="Enter your new password">
            </div>
            <button type="submit">Update Password</button>
        </form>
    </section>

    <section class="creditCards">
        <div class="form-group">
            <label>Credit Cards:</label>
            <% currentUser.creditCards.forEach(function(card) { %>
                <div class="creditCard">
                    <h4><%- card %></h4>
                    <form class="creditCard-form" action="/account?_method=DELETE" method="POST">
                        <button type="submit" value="<%- card %>">Remove Card</button>
                    </form>
                    <form class="creditCard-form" action="/account/updateCreditCard" method="GET">
                        <button type="submit" value="<%- card %>">Update Card</button>
                    </form>
                </div>
            <% }) %>
            <div class="addCreditCard">
                <form class="creditCard-form" action="/account?_method=PUT" method="POST">
                    <div class="form-group">
                        <label for="number">Number:</label>
                        <input type="text" name="number" placeholder="0000 0000 0000 0000">
                    </div>
                    <div class="form-group">
                        <label for="name">Name:</label>
                        <input type="text" name="name" placeholder="John Smith">
                    </div>
                    <div class="form-group">
                        <label for="type">Type:</label>
                        <input type="text" name="type" placeholder="VISA">
                    </div>
                    <div class="form-group">
                        <label for="month">Expiry Month:</label>
                        <input type="text" name="month" placeholder="04">
                    </div>
                    <div class="form-group">
                        <label for="year">Expiry Year:</label>
                        <input type="text" name="year" placeholder="22">
                    </div>
                    <div class="form-group">
                        <button type="submit">Add Card</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <section class="history">
        <div class="form-group">
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Business</th>
                        <th>Spent</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>17/4/17</td>
                        <td>Chinese Restaurant</td>
                        <td>$19.95</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <% var register = currentUser.business ? 'none' : 'inline-block'  %>
    <% var manage = currentUser.business ? 'inline-block' : 'none'  %>

    <section class="advanced">
        <form class="registerBusiness" style="display: <%-register%>" action="/business/register" method="GET">
            <button type="submit">Register a business</button>
        </form>
        <form class="manageBusiness" style="display: <%-manage%>" action="/business/dashboard" method="GET">
            <button type="submit">Go to your business dashboard</button>
        </form>
    </section>
</main>

<aside class="right-aside"></aside>

<script src="/scripts/account/account.js" charset="utf-8"></script>
